// vite.config.ts
import { defineConfig } from "file:///home/project/node_modules/vite/dist/node/index.js";
import react from "file:///home/project/node_modules/@vitejs/plugin-react-swc/index.js";
import path from "path";
import { componentTagger } from "file:///home/project/node_modules/lovable-tagger/dist/index.js";
import { visualizer } from "file:///home/project/node_modules/rollup-plugin-visualizer/dist/plugin/index.js";
var __vite_injected_original_dirname = "/home/project";
function buildVersionPlugin() {
  const buildTime = Date.now().toString();
  return {
    name: "build-version-injector",
    transformIndexHtml(html) {
      const preconnects = `
    <link rel="preconnect" href="https://vxplzgwimqqimkpabvja.supabase.co" crossorigin>
    <link rel="dns-prefetch" href="https://vxplzgwimqqimkpabvja.supabase.co">
    <meta name="app-version" content="${buildTime}" />`;
      return html.replace("</head>", `${preconnects}
</head>`);
    },
    transform(code, id) {
      if (id.endsWith("sw.js") || id.includes("service-worker")) {
        return code.replace(/__BUILD_TIME__/g, buildTime);
      }
      return code;
    },
    // FIX: Process public/sw.js during build - Vite doesn't transform public/ files
    // This hook runs after files are copied to dist, allowing us to modify sw.js
    writeBundle: {
      sequential: true,
      order: "post",
      async handler(options) {
        const fs = await import("fs");
        const nodePath = await import("path");
        const outDir = options.dir || "dist";
        const swPath = nodePath.default.join(outDir, "sw.js");
        try {
          if (fs.existsSync(swPath)) {
            let swContent = fs.readFileSync(swPath, "utf-8");
            swContent = swContent.replace(/__BUILD_TIME__/g, buildTime);
            fs.writeFileSync(swPath, swContent, "utf-8");
            console.log(`[build-version-injector] sw.js updated with version: ${buildTime}`);
          }
        } catch (e) {
          console.error("[build-version-injector] Failed to process sw.js:", e);
        }
      }
    }
  };
}
function cssOptimizationPlugin() {
  return {
    name: "css-optimization",
    enforce: "post",
    generateBundle(_options, bundle) {
      for (const [fileName, chunk] of Object.entries(bundle)) {
        if (fileName.endsWith(".css") && chunk.type === "asset") {
          const source = "source" in chunk ? chunk.source : void 0;
          const size = typeof source === "string" ? source.length : 0;
          if (size > 5e4) {
            console.log(`[CSS Optimization] Large CSS file detected: ${fileName} (${Math.round(size / 1024)}KB)`);
          }
        }
      }
    }
  };
}
function preloadPlugin() {
  return {
    name: "preload-plugin",
    enforce: "post",
    transformIndexHtml(html, ctx) {
      if (!ctx.bundle) return html;
      const criticalChunks = ["react-vendor", "react-router"];
      const preloadLinks = [];
      for (const [fileName, chunk] of Object.entries(ctx.bundle)) {
        if (chunk.type === "chunk") {
          const isCritical = criticalChunks.some((name) => fileName.includes(name));
          if (isCritical) {
            preloadLinks.push(`<link rel="modulepreload" href="/${fileName}" fetchpriority="high">`);
          }
        }
      }
      for (const [fileName] of Object.entries(ctx.bundle)) {
        if (fileName.endsWith(".css") && fileName.includes("index")) {
          preloadLinks.push(`<link rel="preload" href="/${fileName}" as="style" fetchpriority="high">`);
        }
      }
      return html.replace("</head>", `${preloadLinks.join("\n")}
</head>`);
    }
  };
}
function resourceHintsPlugin() {
  return {
    name: "resource-hints-plugin",
    enforce: "post",
    transformIndexHtml(html) {
      return html.replace(
        /<script type="module" src="\/src\/main\.tsx">/,
        '<script type="module" src="/src/main.tsx" fetchpriority="high">'
      );
    }
  };
}
var BUILD_TIME = Date.now().toString();
var vite_config_default = defineConfig(({ mode }) => ({
  // Define global constants available in app code
  define: {
    "import.meta.env.VITE_BUILD_TIME": JSON.stringify(BUILD_TIME)
  },
  server: {
    host: "::",
    port: 8080
  },
  plugins: [
    react(),
    buildVersionPlugin(),
    cssOptimizationPlugin(),
    preloadPlugin(),
    resourceHintsPlugin(),
    mode === "development" && componentTagger(),
    // Bundle analyzer - generates stats.html in dist folder
    mode === "production" && visualizer({
      filename: "dist/stats.html",
      open: false,
      gzipSize: true,
      brotliSize: true,
      template: "treemap"
    })
  ].filter(Boolean),
  resolve: {
    alias: {
      "@": path.resolve(__vite_injected_original_dirname, "./src"),
      // Force single React instance (prevents Invalid Hook Call)
      react: path.resolve(__vite_injected_original_dirname, "./node_modules/react"),
      "react-dom": path.resolve(__vite_injected_original_dirname, "./node_modules/react-dom")
    },
    // Prevent duplicate React instances (including jsx runtimes)
    dedupe: ["react", "react-dom"]
  },
  optimizeDeps: {
    include: [
      "react",
      "react-dom",
      "@tanstack/react-query",
      "framer-motion",
      "lucide-react"
    ],
    exclude: ["@capacitor/core", "@capacitor/app"]
  },
  esbuild: {
    drop: mode === "production" ? ["console", "debugger"] : [],
    // More aggressive minification options
    minifyIdentifiers: mode === "production",
    minifySyntax: mode === "production",
    minifyWhitespace: mode === "production"
  },
  build: {
    sourcemap: false,
    // Disable sourcemaps in production
    // Use esbuild for minification - safer for React than terser
    minify: "esbuild",
    // Inline assets smaller than 8KB to reduce HTTP requests (was 4KB)
    assetsInlineLimit: 8192,
    // Report compressed (gzip) sizes in build output
    reportCompressedSize: true,
    // Explicit cssCodeSplit for clarity (defaults to true)
    cssCodeSplit: true,
    // Target modern browsers for smaller bundles (removes polyfills)
    target: "es2020",
    // Optimize CSS for production
    cssMinify: mode === "production" ? "esbuild" : false,
    rollupOptions: {
      output: {
        // Use content hashes for long-term caching
        entryFileNames: "assets/[name]-[hash].js",
        chunkFileNames: "assets/[name]-[hash].js",
        assetFileNames: "assets/[name]-[hash].[ext]",
        manualChunks(id) {
          if (id.includes("node_modules/react/") || id.includes("node_modules/react-dom/")) {
            return "react-vendor";
          }
          if (id.includes("node_modules/react-router")) {
            return "react-router";
          }
          if (id.includes("node_modules/scheduler")) {
            return "react-vendor";
          }
          if (id.includes("node_modules/clsx") || id.includes("node_modules/tailwind-merge")) {
            return "utils";
          }
          if (id.includes("node_modules/class-variance-authority")) {
            return "utils";
          }
          if (id.includes("data/worldLocations") || id.includes("data/mexicanLocations")) {
            return "data-locations";
          }
          if (id.includes("node_modules/@tanstack/react-query")) {
            return "react-query";
          }
          if (id.includes("node_modules/@supabase")) {
            return "supabase";
          }
          if (id.includes("node_modules/framer-motion")) {
            return "motion";
          }
          if (id.includes("node_modules/@radix-ui/react-dialog") || id.includes("node_modules/@radix-ui/react-alert-dialog")) {
            return "ui-dialogs";
          }
          if (id.includes("node_modules/@radix-ui/react-dropdown") || id.includes("node_modules/@radix-ui/react-select") || id.includes("node_modules/@radix-ui/react-popover")) {
            return "ui-dropdowns";
          }
          if (id.includes("node_modules/@radix-ui/react-tooltip")) {
            return "ui-tooltip";
          }
          if (id.includes("node_modules/@radix-ui")) {
            return "ui-radix";
          }
          if (id.includes("node_modules/date-fns")) {
            return "date-utils";
          }
          if (id.includes("node_modules/lucide-react") || id.includes("node_modules/react-icons")) {
            return "icons";
          }
          if (id.includes("node_modules/zod")) {
            return "validation";
          }
          if (id.includes("node_modules/react-hook-form") || id.includes("node_modules/@hookform")) {
            return "forms";
          }
          if (id.includes("node_modules/recharts") || id.includes("node_modules/d3")) {
            return "charts";
          }
          if (id.includes("node_modules/@capacitor")) {
            return "capacitor";
          }
          if (id.includes("node_modules/embla-carousel")) {
            return "carousel";
          }
          if (id.includes("node_modules/cmdk")) {
            return "cmdk";
          }
          if (id.includes("node_modules")) {
            return "vendor";
          }
        }
      },
      // Safe tree shaking - don't break React context
      treeshake: {
        preset: "safest"
      }
    },
    // Warn on chunks larger than 500KB instead of 1000KB for mobile optimization
    chunkSizeWarningLimit: 500
  }
}));
export {
  vite_config_default as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsidml0ZS5jb25maWcudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImNvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9kaXJuYW1lID0gXCIvaG9tZS9wcm9qZWN0XCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ZpbGVuYW1lID0gXCIvaG9tZS9wcm9qZWN0L3ZpdGUuY29uZmlnLnRzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ltcG9ydF9tZXRhX3VybCA9IFwiZmlsZTovLy9ob21lL3Byb2plY3Qvdml0ZS5jb25maWcudHNcIjtpbXBvcnQgeyBkZWZpbmVDb25maWcgfSBmcm9tIFwidml0ZVwiO1xuaW1wb3J0IHJlYWN0IGZyb20gXCJAdml0ZWpzL3BsdWdpbi1yZWFjdC1zd2NcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgeyBjb21wb25lbnRUYWdnZXIgfSBmcm9tIFwibG92YWJsZS10YWdnZXJcIjtcbmltcG9ydCB7IHZpc3VhbGl6ZXIgfSBmcm9tIFwicm9sbHVwLXBsdWdpbi12aXN1YWxpemVyXCI7XG5cbi8vIEJ1aWxkIHZlcnNpb24gaW5qZWN0b3IgcGx1Z2luIGZvciBhdXRvbWF0aWMgY2FjaGUgYnVzdGluZ1xuZnVuY3Rpb24gYnVpbGRWZXJzaW9uUGx1Z2luKCkge1xuICBjb25zdCBidWlsZFRpbWUgPSBEYXRlLm5vdygpLnRvU3RyaW5nKCk7XG4gIHJldHVybiB7XG4gICAgbmFtZTogJ2J1aWxkLXZlcnNpb24taW5qZWN0b3InLFxuICAgIHRyYW5zZm9ybUluZGV4SHRtbChodG1sOiBzdHJpbmcpIHtcbiAgICAgIC8vIEluamVjdCB2ZXJzaW9uLCBwcmVjb25uZWN0IGhpbnRzLCBhbmQgcGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uc1xuICAgICAgY29uc3QgcHJlY29ubmVjdHMgPSBgXG4gICAgPGxpbmsgcmVsPVwicHJlY29ubmVjdFwiIGhyZWY9XCJodHRwczovL3Z4cGx6Z3dpbXFxaW1rcGFidmphLnN1cGFiYXNlLmNvXCIgY3Jvc3NvcmlnaW4+XG4gICAgPGxpbmsgcmVsPVwiZG5zLXByZWZldGNoXCIgaHJlZj1cImh0dHBzOi8vdnhwbHpnd2ltcXFpbWtwYWJ2amEuc3VwYWJhc2UuY29cIj5cbiAgICA8bWV0YSBuYW1lPVwiYXBwLXZlcnNpb25cIiBjb250ZW50PVwiJHtidWlsZFRpbWV9XCIgLz5gO1xuICAgICAgcmV0dXJuIGh0bWwucmVwbGFjZSgnPC9oZWFkPicsIGAke3ByZWNvbm5lY3RzfVxcbjwvaGVhZD5gKTtcbiAgICB9LFxuICAgIHRyYW5zZm9ybShjb2RlOiBzdHJpbmcsIGlkOiBzdHJpbmcpIHtcbiAgICAgIC8vIFJlcGxhY2UgX19CVUlMRF9USU1FX18gaW4gc2VydmljZSB3b3JrZXIgKGZvciBzcmMvIGZpbGVzKVxuICAgICAgaWYgKGlkLmVuZHNXaXRoKCdzdy5qcycpIHx8IGlkLmluY2x1ZGVzKCdzZXJ2aWNlLXdvcmtlcicpKSB7XG4gICAgICAgIHJldHVybiBjb2RlLnJlcGxhY2UoL19fQlVJTERfVElNRV9fL2csIGJ1aWxkVGltZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY29kZTtcbiAgICB9LFxuICAgIC8vIEZJWDogUHJvY2VzcyBwdWJsaWMvc3cuanMgZHVyaW5nIGJ1aWxkIC0gVml0ZSBkb2Vzbid0IHRyYW5zZm9ybSBwdWJsaWMvIGZpbGVzXG4gICAgLy8gVGhpcyBob29rIHJ1bnMgYWZ0ZXIgZmlsZXMgYXJlIGNvcGllZCB0byBkaXN0LCBhbGxvd2luZyB1cyB0byBtb2RpZnkgc3cuanNcbiAgICB3cml0ZUJ1bmRsZToge1xuICAgICAgc2VxdWVudGlhbDogdHJ1ZSxcbiAgICAgIG9yZGVyOiAncG9zdCcgYXMgY29uc3QsXG4gICAgICBhc3luYyBoYW5kbGVyKG9wdGlvbnM6IHsgZGlyPzogc3RyaW5nIH0pIHtcbiAgICAgICAgY29uc3QgZnMgPSBhd2FpdCBpbXBvcnQoJ2ZzJyk7XG4gICAgICAgIGNvbnN0IG5vZGVQYXRoID0gYXdhaXQgaW1wb3J0KCdwYXRoJyk7XG4gICAgICAgIGNvbnN0IG91dERpciA9IG9wdGlvbnMuZGlyIHx8ICdkaXN0JztcbiAgICAgICAgY29uc3Qgc3dQYXRoID0gbm9kZVBhdGguZGVmYXVsdC5qb2luKG91dERpciwgJ3N3LmpzJyk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoZnMuZXhpc3RzU3luYyhzd1BhdGgpKSB7XG4gICAgICAgICAgICBsZXQgc3dDb250ZW50ID0gZnMucmVhZEZpbGVTeW5jKHN3UGF0aCwgJ3V0Zi04Jyk7XG4gICAgICAgICAgICAvLyBSZXBsYWNlIEJVSUxEX1RJTUUgcGxhY2Vob2xkZXIgd2l0aCBhY3R1YWwgYnVpbGQgdGltZXN0YW1wXG4gICAgICAgICAgICBzd0NvbnRlbnQgPSBzd0NvbnRlbnQucmVwbGFjZSgvX19CVUlMRF9USU1FX18vZywgYnVpbGRUaW1lKTtcbiAgICAgICAgICAgIGZzLndyaXRlRmlsZVN5bmMoc3dQYXRoLCBzd0NvbnRlbnQsICd1dGYtOCcpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFtidWlsZC12ZXJzaW9uLWluamVjdG9yXSBzdy5qcyB1cGRhdGVkIHdpdGggdmVyc2lvbjogJHtidWlsZFRpbWV9YCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignW2J1aWxkLXZlcnNpb24taW5qZWN0b3JdIEZhaWxlZCB0byBwcm9jZXNzIHN3LmpzOicsIGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuXG4vLyBDU1Mgb3B0aW1pemF0aW9uIHBsdWdpbiAtIGV4dHJhY3RzIGFuZCBwdXJnZXMgdW51c2VkIENTU1xuZnVuY3Rpb24gY3NzT3B0aW1pemF0aW9uUGx1Z2luKCk6IGltcG9ydCgndml0ZScpLlBsdWdpbiB7XG4gIHJldHVybiB7XG4gICAgbmFtZTogJ2Nzcy1vcHRpbWl6YXRpb24nLFxuICAgIGVuZm9yY2U6ICdwb3N0JyxcbiAgICBnZW5lcmF0ZUJ1bmRsZShfb3B0aW9ucywgYnVuZGxlKSB7XG4gICAgICAvLyBNYXJrIGxhcmdlIENTUyBjaHVua3MgZm9yIGFuYWx5c2lzIGluIGRldlxuICAgICAgZm9yIChjb25zdCBbZmlsZU5hbWUsIGNodW5rXSBvZiBPYmplY3QuZW50cmllcyhidW5kbGUpKSB7XG4gICAgICAgIGlmIChmaWxlTmFtZS5lbmRzV2l0aCgnLmNzcycpICYmIGNodW5rLnR5cGUgPT09ICdhc3NldCcpIHtcbiAgICAgICAgICBjb25zdCBzb3VyY2UgPSAnc291cmNlJyBpbiBjaHVuayA/IGNodW5rLnNvdXJjZSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICBjb25zdCBzaXplID0gdHlwZW9mIHNvdXJjZSA9PT0gJ3N0cmluZycgPyBzb3VyY2UubGVuZ3RoIDogMDtcbiAgICAgICAgICBpZiAoc2l6ZSA+IDUwMDAwKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgW0NTUyBPcHRpbWl6YXRpb25dIExhcmdlIENTUyBmaWxlIGRldGVjdGVkOiAke2ZpbGVOYW1lfSAoJHtNYXRoLnJvdW5kKHNpemUgLyAxMDI0KX1LQilgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbi8vIFByZWxvYWQgaGludHMgcGx1Z2luIC0gZ2VuZXJhdGVzIG1vZHVsZXByZWxvYWQgZm9yIGNyaXRpY2FsIGNodW5rc1xuZnVuY3Rpb24gcHJlbG9hZFBsdWdpbigpOiBpbXBvcnQoJ3ZpdGUnKS5QbHVnaW4ge1xuICByZXR1cm4ge1xuICAgIG5hbWU6ICdwcmVsb2FkLXBsdWdpbicsXG4gICAgZW5mb3JjZTogJ3Bvc3QnLFxuICAgIHRyYW5zZm9ybUluZGV4SHRtbChodG1sLCBjdHgpIHtcbiAgICAgIGlmICghY3R4LmJ1bmRsZSkgcmV0dXJuIGh0bWw7XG5cbiAgICAgIC8vIEZpbmQgY3JpdGljYWwgY2h1bmtzIHRvIHByZWxvYWQgLSBvbmx5IHRoZSBtb3N0IGVzc2VudGlhbFxuICAgICAgY29uc3QgY3JpdGljYWxDaHVua3MgPSBbJ3JlYWN0LXZlbmRvcicsICdyZWFjdC1yb3V0ZXInXTtcbiAgICAgIGNvbnN0IHByZWxvYWRMaW5rczogc3RyaW5nW10gPSBbXTtcblxuICAgICAgZm9yIChjb25zdCBbZmlsZU5hbWUsIGNodW5rXSBvZiBPYmplY3QuZW50cmllcyhjdHguYnVuZGxlKSkge1xuICAgICAgICBpZiAoY2h1bmsudHlwZSA9PT0gJ2NodW5rJykge1xuICAgICAgICAgIGNvbnN0IGlzQ3JpdGljYWwgPSBjcml0aWNhbENodW5rcy5zb21lKG5hbWUgPT4gZmlsZU5hbWUuaW5jbHVkZXMobmFtZSkpO1xuICAgICAgICAgIGlmIChpc0NyaXRpY2FsKSB7XG4gICAgICAgICAgICBwcmVsb2FkTGlua3MucHVzaChgPGxpbmsgcmVsPVwibW9kdWxlcHJlbG9hZFwiIGhyZWY9XCIvJHtmaWxlTmFtZX1cIiBmZXRjaHByaW9yaXR5PVwiaGlnaFwiPmApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBBZGQgQ1NTIHByZWxvYWQgZm9yIGNyaXRpY2FsIHN0eWxlc2hlZXRcbiAgICAgIGZvciAoY29uc3QgW2ZpbGVOYW1lXSBvZiBPYmplY3QuZW50cmllcyhjdHguYnVuZGxlKSkge1xuICAgICAgICBpZiAoZmlsZU5hbWUuZW5kc1dpdGgoJy5jc3MnKSAmJiBmaWxlTmFtZS5pbmNsdWRlcygnaW5kZXgnKSkge1xuICAgICAgICAgIHByZWxvYWRMaW5rcy5wdXNoKGA8bGluayByZWw9XCJwcmVsb2FkXCIgaHJlZj1cIi8ke2ZpbGVOYW1lfVwiIGFzPVwic3R5bGVcIiBmZXRjaHByaW9yaXR5PVwiaGlnaFwiPmApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBodG1sLnJlcGxhY2UoJzwvaGVhZD4nLCBgJHtwcmVsb2FkTGlua3Muam9pbignXFxuJyl9XFxuPC9oZWFkPmApO1xuICAgIH1cbiAgfTtcbn1cblxuLy8gUmVzb3VyY2UgaGludHMgcGx1Z2luIC0gYWRkcyBmZXRjaHByaW9yaXR5IGFuZCBsb2FkaW5nIGhpbnRzXG5mdW5jdGlvbiByZXNvdXJjZUhpbnRzUGx1Z2luKCk6IGltcG9ydCgndml0ZScpLlBsdWdpbiB7XG4gIHJldHVybiB7XG4gICAgbmFtZTogJ3Jlc291cmNlLWhpbnRzLXBsdWdpbicsXG4gICAgZW5mb3JjZTogJ3Bvc3QnLFxuICAgIHRyYW5zZm9ybUluZGV4SHRtbChodG1sKSB7XG4gICAgICAvLyBBZGQgZmV0Y2hwcmlvcml0eSB0byBjcml0aWNhbCByZXNvdXJjZXNcbiAgICAgIHJldHVybiBodG1sXG4gICAgICAgIC8vIE1hcmsgbWFpbiBzY3JpcHQgYXMgaGlnaCBwcmlvcml0eVxuICAgICAgICAucmVwbGFjZShcbiAgICAgICAgICAvPHNjcmlwdCB0eXBlPVwibW9kdWxlXCIgc3JjPVwiXFwvc3JjXFwvbWFpblxcLnRzeFwiPi8sXG4gICAgICAgICAgJzxzY3JpcHQgdHlwZT1cIm1vZHVsZVwiIHNyYz1cIi9zcmMvbWFpbi50c3hcIiBmZXRjaHByaW9yaXR5PVwiaGlnaFwiPidcbiAgICAgICAgKTtcbiAgICB9XG4gIH07XG59XG5cbi8vIEJ1aWxkIHRpbWVzdGFtcCBmb3IgY2FjaGUgdmVyc2lvbmluZyAodXNlZCBieSBTVyByZWdpc3RyYXRpb24pXG5jb25zdCBCVUlMRF9USU1FID0gRGF0ZS5ub3coKS50b1N0cmluZygpO1xuXG4vLyBodHRwczovL3ZpdGVqcy5kZXYvY29uZmlnL1xuZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29uZmlnKCh7IG1vZGUgfSkgPT4gKHtcbiAgLy8gRGVmaW5lIGdsb2JhbCBjb25zdGFudHMgYXZhaWxhYmxlIGluIGFwcCBjb2RlXG4gIGRlZmluZToge1xuICAgICdpbXBvcnQubWV0YS5lbnYuVklURV9CVUlMRF9USU1FJzogSlNPTi5zdHJpbmdpZnkoQlVJTERfVElNRSksXG4gIH0sXG4gIHNlcnZlcjoge1xuICAgIGhvc3Q6IFwiOjpcIixcbiAgICBwb3J0OiA4MDgwLFxuICB9LFxuICBwbHVnaW5zOiBbXG4gICAgcmVhY3QoKSxcbiAgICBidWlsZFZlcnNpb25QbHVnaW4oKSxcbiAgICBjc3NPcHRpbWl6YXRpb25QbHVnaW4oKSxcbiAgICBwcmVsb2FkUGx1Z2luKCksXG4gICAgcmVzb3VyY2VIaW50c1BsdWdpbigpLFxuICAgIG1vZGUgPT09ICdkZXZlbG9wbWVudCcgJiYgY29tcG9uZW50VGFnZ2VyKCksXG4gICAgLy8gQnVuZGxlIGFuYWx5emVyIC0gZ2VuZXJhdGVzIHN0YXRzLmh0bWwgaW4gZGlzdCBmb2xkZXJcbiAgICBtb2RlID09PSAncHJvZHVjdGlvbicgJiYgdmlzdWFsaXplcih7XG4gICAgICBmaWxlbmFtZTogJ2Rpc3Qvc3RhdHMuaHRtbCcsXG4gICAgICBvcGVuOiBmYWxzZSxcbiAgICAgIGd6aXBTaXplOiB0cnVlLFxuICAgICAgYnJvdGxpU2l6ZTogdHJ1ZSxcbiAgICAgIHRlbXBsYXRlOiAndHJlZW1hcCcsXG4gICAgfSksXG4gIF0uZmlsdGVyKEJvb2xlYW4pLFxuICByZXNvbHZlOiB7XG4gICAgYWxpYXM6IHtcbiAgICAgIFwiQFwiOiBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCBcIi4vc3JjXCIpLFxuICAgICAgLy8gRm9yY2Ugc2luZ2xlIFJlYWN0IGluc3RhbmNlIChwcmV2ZW50cyBJbnZhbGlkIEhvb2sgQ2FsbClcbiAgICAgIHJlYWN0OiBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCBcIi4vbm9kZV9tb2R1bGVzL3JlYWN0XCIpLFxuICAgICAgXCJyZWFjdC1kb21cIjogcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgXCIuL25vZGVfbW9kdWxlcy9yZWFjdC1kb21cIiksXG4gICAgfSxcbiAgICAvLyBQcmV2ZW50IGR1cGxpY2F0ZSBSZWFjdCBpbnN0YW5jZXMgKGluY2x1ZGluZyBqc3ggcnVudGltZXMpXG4gICAgZGVkdXBlOiBbJ3JlYWN0JywgJ3JlYWN0LWRvbSddLFxuICB9LFxuICBvcHRpbWl6ZURlcHM6IHtcbiAgICBpbmNsdWRlOiBbXG4gICAgICAncmVhY3QnLFxuICAgICAgJ3JlYWN0LWRvbScsXG4gICAgICAnQHRhbnN0YWNrL3JlYWN0LXF1ZXJ5JyxcbiAgICAgICdmcmFtZXItbW90aW9uJyxcbiAgICAgICdsdWNpZGUtcmVhY3QnXG4gICAgXSxcbiAgICBleGNsdWRlOiBbJ0BjYXBhY2l0b3IvY29yZScsICdAY2FwYWNpdG9yL2FwcCddLFxuICB9LFxuICBlc2J1aWxkOiB7XG4gICAgZHJvcDogbW9kZSA9PT0gJ3Byb2R1Y3Rpb24nID8gWydjb25zb2xlJywgJ2RlYnVnZ2VyJ10gOiBbXSxcbiAgICAvLyBNb3JlIGFnZ3Jlc3NpdmUgbWluaWZpY2F0aW9uIG9wdGlvbnNcbiAgICBtaW5pZnlJZGVudGlmaWVyczogbW9kZSA9PT0gJ3Byb2R1Y3Rpb24nLFxuICAgIG1pbmlmeVN5bnRheDogbW9kZSA9PT0gJ3Byb2R1Y3Rpb24nLFxuICAgIG1pbmlmeVdoaXRlc3BhY2U6IG1vZGUgPT09ICdwcm9kdWN0aW9uJyxcbiAgfSxcbiAgYnVpbGQ6IHtcbiAgICBzb3VyY2VtYXA6IGZhbHNlLCAvLyBEaXNhYmxlIHNvdXJjZW1hcHMgaW4gcHJvZHVjdGlvblxuICAgIC8vIFVzZSBlc2J1aWxkIGZvciBtaW5pZmljYXRpb24gLSBzYWZlciBmb3IgUmVhY3QgdGhhbiB0ZXJzZXJcbiAgICBtaW5pZnk6ICdlc2J1aWxkJyxcbiAgICAvLyBJbmxpbmUgYXNzZXRzIHNtYWxsZXIgdGhhbiA4S0IgdG8gcmVkdWNlIEhUVFAgcmVxdWVzdHMgKHdhcyA0S0IpXG4gICAgYXNzZXRzSW5saW5lTGltaXQ6IDgxOTIsXG4gICAgLy8gUmVwb3J0IGNvbXByZXNzZWQgKGd6aXApIHNpemVzIGluIGJ1aWxkIG91dHB1dFxuICAgIHJlcG9ydENvbXByZXNzZWRTaXplOiB0cnVlLFxuICAgIC8vIEV4cGxpY2l0IGNzc0NvZGVTcGxpdCBmb3IgY2xhcml0eSAoZGVmYXVsdHMgdG8gdHJ1ZSlcbiAgICBjc3NDb2RlU3BsaXQ6IHRydWUsXG4gICAgLy8gVGFyZ2V0IG1vZGVybiBicm93c2VycyBmb3Igc21hbGxlciBidW5kbGVzIChyZW1vdmVzIHBvbHlmaWxscylcbiAgICB0YXJnZXQ6ICdlczIwMjAnLFxuICAgIC8vIE9wdGltaXplIENTUyBmb3IgcHJvZHVjdGlvblxuICAgIGNzc01pbmlmeTogbW9kZSA9PT0gJ3Byb2R1Y3Rpb24nID8gJ2VzYnVpbGQnIDogZmFsc2UsXG4gICAgcm9sbHVwT3B0aW9uczoge1xuICAgICAgb3V0cHV0OiB7XG4gICAgICAgIC8vIFVzZSBjb250ZW50IGhhc2hlcyBmb3IgbG9uZy10ZXJtIGNhY2hpbmdcbiAgICAgICAgZW50cnlGaWxlTmFtZXM6ICdhc3NldHMvW25hbWVdLVtoYXNoXS5qcycsXG4gICAgICAgIGNodW5rRmlsZU5hbWVzOiAnYXNzZXRzL1tuYW1lXS1baGFzaF0uanMnLFxuICAgICAgICBhc3NldEZpbGVOYW1lczogJ2Fzc2V0cy9bbmFtZV0tW2hhc2hdLltleHRdJyxcbiAgICAgICAgbWFudWFsQ2h1bmtzKGlkKSB7XG4gICAgICAgICAgLy8gXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXG4gICAgICAgICAgLy8gQ1JJVElDQUwgUEFUSCAtIFNtYWxsZXN0IHBvc3NpYmxlIGluaXRpYWwgYnVuZGxlXG4gICAgICAgICAgLy8gXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXG5cbiAgICAgICAgICAvLyBDb3JlIFJlYWN0IHJ1bnRpbWUgLSBzbWFsbGVzdCBwb3NzaWJsZSBjcml0aWNhbCBjaHVua1xuICAgICAgICAgIGlmIChpZC5pbmNsdWRlcygnbm9kZV9tb2R1bGVzL3JlYWN0LycpIHx8IGlkLmluY2x1ZGVzKCdub2RlX21vZHVsZXMvcmVhY3QtZG9tLycpKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3JlYWN0LXZlbmRvcic7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFJlYWN0IFJvdXRlciAtIGxvYWRlZCBvbiBldmVyeSBwYWdlLCBrZWVwIHNtYWxsXG4gICAgICAgICAgaWYgKGlkLmluY2x1ZGVzKCdub2RlX21vZHVsZXMvcmVhY3Qtcm91dGVyJykpIHtcbiAgICAgICAgICAgIHJldHVybiAncmVhY3Qtcm91dGVyJztcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gU2NoZWR1bGVyIChSZWFjdCBkZXBlbmRlbmN5KSAtIGtlZXAgd2l0aCByZWFjdFxuICAgICAgICAgIGlmIChpZC5pbmNsdWRlcygnbm9kZV9tb2R1bGVzL3NjaGVkdWxlcicpKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3JlYWN0LXZlbmRvcic7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGNsc3ggYW5kIHRhaWx3aW5kLW1lcmdlIC0gdXRpbGl0eSBsaWJzIHVzZWQgZXZlcnl3aGVyZSwga2VlcCBzbWFsbFxuICAgICAgICAgIGlmIChpZC5pbmNsdWRlcygnbm9kZV9tb2R1bGVzL2Nsc3gnKSB8fCBpZC5pbmNsdWRlcygnbm9kZV9tb2R1bGVzL3RhaWx3aW5kLW1lcmdlJykpIHtcbiAgICAgICAgICAgIHJldHVybiAndXRpbHMnO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBjbGFzcy12YXJpYW5jZS1hdXRob3JpdHkgLSBVSSBzdHlsaW5nIHV0aWxpdHlcbiAgICAgICAgICBpZiAoaWQuaW5jbHVkZXMoJ25vZGVfbW9kdWxlcy9jbGFzcy12YXJpYW5jZS1hdXRob3JpdHknKSkge1xuICAgICAgICAgICAgcmV0dXJuICd1dGlscyc7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXG4gICAgICAgICAgLy8gTEFSR0UgREFUQSBGSUxFUyAtIExvYWQgb24gZGVtYW5kICgyMTBLQisgc2F2aW5ncylcbiAgICAgICAgICAvLyBcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcblxuICAgICAgICAgIC8vIFdvcmxkIGxvY2F0aW9ucyBkYXRhIC0gb25seSBuZWVkZWQgZm9yIGxvY2F0aW9uIGZpbHRlcnNcbiAgICAgICAgICBpZiAoaWQuaW5jbHVkZXMoJ2RhdGEvd29ybGRMb2NhdGlvbnMnKSB8fCBpZC5pbmNsdWRlcygnZGF0YS9tZXhpY2FuTG9jYXRpb25zJykpIHtcbiAgICAgICAgICAgIHJldHVybiAnZGF0YS1sb2NhdGlvbnMnO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVxuICAgICAgICAgIC8vIEZFQVRVUkUgQ0hVTktTIC0gTGF6eSBsb2FkZWQgcGVyIGZlYXR1cmVcbiAgICAgICAgICAvLyBcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcblxuICAgICAgICAgIC8vIFJlYWN0IFF1ZXJ5IC0gZGVmZXIgbG9hZGluZywgbm90IG5lZWRlZCBmb3IgaW5pdGlhbCByZW5kZXJcbiAgICAgICAgICBpZiAoaWQuaW5jbHVkZXMoJ25vZGVfbW9kdWxlcy9AdGFuc3RhY2svcmVhY3QtcXVlcnknKSkge1xuICAgICAgICAgICAgcmV0dXJuICdyZWFjdC1xdWVyeSc7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFN1cGFiYXNlIGNsaWVudCAtIG9ubHkgbG9hZCB3aGVuIGF1dGggaXMgbmVlZGVkXG4gICAgICAgICAgaWYgKGlkLmluY2x1ZGVzKCdub2RlX21vZHVsZXMvQHN1cGFiYXNlJykpIHtcbiAgICAgICAgICAgIHJldHVybiAnc3VwYWJhc2UnO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBGcmFtZXIgTW90aW9uIC0gaGVhdnkgYW5pbWF0aW9uIGxpYnJhcnksIGxvYWQgc2VwYXJhdGVseVxuICAgICAgICAgIGlmIChpZC5pbmNsdWRlcygnbm9kZV9tb2R1bGVzL2ZyYW1lci1tb3Rpb24nKSkge1xuICAgICAgICAgICAgcmV0dXJuICdtb3Rpb24nO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVx1MjUwMVxuICAgICAgICAgIC8vIFVJIENPTVBPTkVOVFMgLSBTcGxpdCBieSB1c2FnZSBwYXR0ZXJuXG4gICAgICAgICAgLy8gXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXG5cbiAgICAgICAgICAvLyBTcGxpdCBSYWRpeCBVSSBieSBjb21wb25lbnQgdHlwZSBmb3IgZ3JhbnVsYXIgbG9hZGluZ1xuICAgICAgICAgIGlmIChpZC5pbmNsdWRlcygnbm9kZV9tb2R1bGVzL0ByYWRpeC11aS9yZWFjdC1kaWFsb2cnKSB8fFxuICAgICAgICAgICAgICBpZC5pbmNsdWRlcygnbm9kZV9tb2R1bGVzL0ByYWRpeC11aS9yZWFjdC1hbGVydC1kaWFsb2cnKSkge1xuICAgICAgICAgICAgcmV0dXJuICd1aS1kaWFsb2dzJztcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGlkLmluY2x1ZGVzKCdub2RlX21vZHVsZXMvQHJhZGl4LXVpL3JlYWN0LWRyb3Bkb3duJykgfHxcbiAgICAgICAgICAgICAgaWQuaW5jbHVkZXMoJ25vZGVfbW9kdWxlcy9AcmFkaXgtdWkvcmVhY3Qtc2VsZWN0JykgfHxcbiAgICAgICAgICAgICAgaWQuaW5jbHVkZXMoJ25vZGVfbW9kdWxlcy9AcmFkaXgtdWkvcmVhY3QtcG9wb3ZlcicpKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3VpLWRyb3Bkb3ducyc7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFRvb2x0aXAgLSB2ZXJ5IGNvbW1vbiwga2VlcCBzZXBhcmF0ZSBhbmQgc21hbGxcbiAgICAgICAgICBpZiAoaWQuaW5jbHVkZXMoJ25vZGVfbW9kdWxlcy9AcmFkaXgtdWkvcmVhY3QtdG9vbHRpcCcpKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3VpLXRvb2x0aXAnO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaWQuaW5jbHVkZXMoJ25vZGVfbW9kdWxlcy9AcmFkaXgtdWknKSkge1xuICAgICAgICAgICAgcmV0dXJuICd1aS1yYWRpeCc7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXG4gICAgICAgICAgLy8gVVRJTElUSUVTICYgTElCUkFSSUVTXG4gICAgICAgICAgLy8gXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXG5cbiAgICAgICAgICAvLyBEYXRlIHV0aWxpdGllcyAtIG9ubHkgbmVlZGVkIGZvciBjYWxlbmRhci9kYXRlIGZlYXR1cmVzXG4gICAgICAgICAgaWYgKGlkLmluY2x1ZGVzKCdub2RlX21vZHVsZXMvZGF0ZS1mbnMnKSkge1xuICAgICAgICAgICAgcmV0dXJuICdkYXRlLXV0aWxzJztcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gSWNvbnMgLSBzcGxpdCBvdXQgYXMgdGhleSBjYW4gYmUgbGFyZ2VcbiAgICAgICAgICBpZiAoaWQuaW5jbHVkZXMoJ25vZGVfbW9kdWxlcy9sdWNpZGUtcmVhY3QnKSB8fCBpZC5pbmNsdWRlcygnbm9kZV9tb2R1bGVzL3JlYWN0LWljb25zJykpIHtcbiAgICAgICAgICAgIHJldHVybiAnaWNvbnMnO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBGb3JtcyAtIG9ubHkgbmVlZGVkIG9uIGZvcm0gcGFnZXNcbiAgICAgICAgICBpZiAoaWQuaW5jbHVkZXMoJ25vZGVfbW9kdWxlcy96b2QnKSkge1xuICAgICAgICAgICAgcmV0dXJuICd2YWxpZGF0aW9uJztcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGlkLmluY2x1ZGVzKCdub2RlX21vZHVsZXMvcmVhY3QtaG9vay1mb3JtJykgfHwgaWQuaW5jbHVkZXMoJ25vZGVfbW9kdWxlcy9AaG9va2Zvcm0nKSkge1xuICAgICAgICAgICAgcmV0dXJuICdmb3Jtcyc7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIENoYXJ0cyAtIG9ubHkgbmVlZGVkIG9uIGRhc2hib2FyZCBhbmFseXRpY3NcbiAgICAgICAgICBpZiAoaWQuaW5jbHVkZXMoJ25vZGVfbW9kdWxlcy9yZWNoYXJ0cycpIHx8IGlkLmluY2x1ZGVzKCdub2RlX21vZHVsZXMvZDMnKSkge1xuICAgICAgICAgICAgcmV0dXJuICdjaGFydHMnO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBDYXBhY2l0b3IgLSBvbmx5IG5lZWRlZCBpbiBuYXRpdmUgYXBwc1xuICAgICAgICAgIGlmIChpZC5pbmNsdWRlcygnbm9kZV9tb2R1bGVzL0BjYXBhY2l0b3InKSkge1xuICAgICAgICAgICAgcmV0dXJuICdjYXBhY2l0b3InO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBDYXJvdXNlbCBjb21wb25lbnRzXG4gICAgICAgICAgaWYgKGlkLmluY2x1ZGVzKCdub2RlX21vZHVsZXMvZW1ibGEtY2Fyb3VzZWwnKSkge1xuICAgICAgICAgICAgcmV0dXJuICdjYXJvdXNlbCc7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGNtZGsgLSBjb21tYW5kIHBhbGV0dGUsIHJhcmVseSB1c2VkXG4gICAgICAgICAgaWYgKGlkLmluY2x1ZGVzKCdub2RlX21vZHVsZXMvY21kaycpKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2NtZGsnO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBPdGhlciB2ZW5kb3IgY2h1bmtzIC0gY2F0Y2gtYWxsIChrZWVwIHNtYWxsKVxuICAgICAgICAgIGlmIChpZC5pbmNsdWRlcygnbm9kZV9tb2R1bGVzJykpIHtcbiAgICAgICAgICAgIHJldHVybiAndmVuZG9yJztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAvLyBTYWZlIHRyZWUgc2hha2luZyAtIGRvbid0IGJyZWFrIFJlYWN0IGNvbnRleHRcbiAgICAgIHRyZWVzaGFrZToge1xuICAgICAgICBwcmVzZXQ6ICdzYWZlc3QnLFxuICAgICAgfSxcbiAgICB9LFxuICAgIC8vIFdhcm4gb24gY2h1bmtzIGxhcmdlciB0aGFuIDUwMEtCIGluc3RlYWQgb2YgMTAwMEtCIGZvciBtb2JpbGUgb3B0aW1pemF0aW9uXG4gICAgY2h1bmtTaXplV2FybmluZ0xpbWl0OiA1MDAsXG4gIH0sXG59KSk7XG4iXSwKICAibWFwcGluZ3MiOiAiO0FBQXlOLFNBQVMsb0JBQW9CO0FBQ3RQLE9BQU8sV0FBVztBQUNsQixPQUFPLFVBQVU7QUFDakIsU0FBUyx1QkFBdUI7QUFDaEMsU0FBUyxrQkFBa0I7QUFKM0IsSUFBTSxtQ0FBbUM7QUFPekMsU0FBUyxxQkFBcUI7QUFDNUIsUUFBTSxZQUFZLEtBQUssSUFBSSxFQUFFLFNBQVM7QUFDdEMsU0FBTztBQUFBLElBQ0wsTUFBTTtBQUFBLElBQ04sbUJBQW1CLE1BQWM7QUFFL0IsWUFBTSxjQUFjO0FBQUE7QUFBQTtBQUFBLHdD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d0JBQXdCLEdBQUc7QUFDekMsbUJBQU87QUFBQSxVQUNUO0FBRUEsY0FBSSxHQUFHLFNBQVMsNEJBQTRCLEdBQUc7QUFDN0MsbUJBQU87QUFBQSxVQUNUO0FBT0EsY0FBSSxHQUFHLFNBQVMscUNBQXFDLEtBQ2pELEdBQUcsU0FBUywyQ0FBMkMsR0FBRztBQUM1RCxtQkFBTztBQUFBLFVBQ1Q7QUFDQSxjQUFJLEdBQUcsU0FBUyx1Q0FBdUMsS0FDbkQsR0FBRyxTQUFTLHFDQUFxQyxLQUNqRCxHQUFHLFNBQVMsc0NBQXNDLEdBQUc7QUFDdkQsbUJBQU87QUFBQSxVQUNUO0FBRUEsY0FBSSxHQUFHLFNBQVMsc0NBQXNDLEdBQUc7QUFDdkQsbUJBQU87QUFBQSxVQUNUO0FBQ0EsY0FBSSxHQUFHLFNBQVMsd0JBQXdCLEdBQUc7QUFDekMsbUJBQU87QUFBQSxVQUNUO0FBT0EsY0FBSSxHQUFHLFNBQVMsdUJBQXVCLEdBQUc7QUFDeEMsbUJBQU87QUFBQSxVQUNUO0FBRUEsY0FBSSxHQUFHLFNBQVMsMkJBQTJCLEtBQUssR0FBRyxTQUFTLDBCQUEwQixHQUFHO0FBQ3ZGLG1CQUFPO0FBQUEsVUFDVDtBQUVBLGNBQUksR0FBRyxTQUFTLGtCQUFrQixHQUFHO0FBQ25DLG1CQUFPO0FBQUEsVUFDVDtBQUNBLGNBQUksR0FBRyxTQUFTLDhCQUE4QixLQUFLLEdBQUcsU0FBUyx3QkFBd0IsR0FBRztBQUN4RixtQkFBTztBQUFBLFVBQ1Q7QUFFQSxjQUFJLEdBQUcsU0FBUyx1QkFBdUIsS0FBSyxHQUFHLFNBQVMsaUJBQWlCLEdBQUc7QUFDMUUsbUJBQU87QUFBQSxVQUNUO0FBRUEsY0FBSSxHQUFHLFNBQVMseUJBQXlCLEdBQUc7QUFDMUMsbUJBQU87QUFBQSxVQUNUO0FBRUEsY0FBSSxHQUFHLFNBQVMsNkJBQTZCLEdBQUc7QUFDOUMsbUJBQU87QUFBQSxVQUNUO0FBRUEsY0FBSSxHQUFHLFNBQVMsbUJBQW1CLEdBQUc7QUFDcEMsbUJBQU87QUFBQSxVQUNUO0FBRUEsY0FBSSxHQUFHLFNBQVMsY0FBYyxHQUFHO0FBQy9CLG1CQUFPO0FBQUEsVUFDVDtBQUFBLFFBQ0Y7QUFBQSxNQUNGO0FBQUE7QUFBQSxNQUVBLFdBQVc7QUFBQSxRQUNULFFBQVE7QUFBQSxNQUNWO0FBQUEsSUFDRjtBQUFBO0FBQUEsSUFFQSx1QkFBdUI7QUFBQSxFQUN6QjtBQUNGLEVBQUU7IiwKICAibmFtZXMiOiBbXQp9Cg==
